# HOC : Hight Order Component

### ğŸ’¡ Comprendre les Hight Order Component

## ğŸ“ Tes notes

Detaille ce que tu as appris ici
`src/exercise/03.md`ouÂ surÂ uneÂ pageÂ [Notion](https://go.mikecodeur.com/course-notes-template)

## Comprendre

Les HOC permettent de rÃ©utiliser la logique d'un composant : ConcrÃ¨tement, un
composant dâ€™ordre supÃ©rieur est une `fonction` qui accepte un `composant` et
renvoie un nouveau `composant`. un HOC n'ajoute rien comme Ã©lÃ©ment dans la vue.
Partant de cette dÃ©finition, nous allons Ã©crire cet fonction HOC qui ne modifie
rien et retourne le composant en entrÃ©e tel quel.

```jsx
// Cette fonction accepte un composant...
function withElement(Element){
	// ... et renvoie un autre composant...
  return function (){ // note : fonction anonyme
    return <Element />
  }
}
// composant normal avec un prop color et style
function Button(props) => {
  return <button style={{color:props.color, ...props.style}}>My Button</button>
}
// composant inaltÃ©rÃ©
const ComposantInaltere= withElement(Button)
```

Pour plus de souplesse nous allons tout convertir en fonctions flÃ©chÃ©es

```jsx
const withElement = Element => () => <Element />

const Button = props => {
  return <button style={{color: props.color, ...props.style}}>My Button</button>
}
```

Maintenant nous allons crÃ©er un HOC qui va injecter la couleur rouge, appelons
le `withRedColor`

```jsx
const withRedColor = Element => props => <Element {...props} color="red" />
const RedButton = withRedColor(Button)
```

> âš ï¸ Il faut toujours penser Ã  transmettre tous les autres props via un _spread
> operator_ `{...props}` pour pouvoir continuer Ã  utiliser le composant
> normalement avec des props: exemple :
> `<RedButton style={{fontStyle: 'italic'}} />`

ğŸ“‘ Le lien vers
[des infos HOC](https://fr.reactjs.org/docs/higher-order-components.html)

## Exercice

Dans cet exercice nous avons 2 composants (`TodoList` et `NotesList`) qui
affichent des donnÃ©es qui viennent d'une source de donnÃ©es. _(cela pourrait Ãªtre
une API par exemple)_. on nommera cela une `DataSource`. Pour que la
`DataSource` fonctionne il faut souscrire via la fonction `apiSubscribe()` et a
la fin `apiUnSubscribe()`.âš ï¸

```jsx
import fetchAPIMock, {apiSubscribe, apiUnSubscribe} from '../data'

apiSubscribe()
const todos = fetchAPIMock().todos
apiUnSubscribe()
//Nous utiliserons un Mock pour cet exercice

//âš ï¸ Dans la rÃ©alitÃ© il faudrait utiliser un state et useEffect. Ici fetchAPIMock()
// est synchrone et juste pour la dÃ©monstration
```

Nos 2 composants doivent donc souscrire (`apiSubscribe`), appeler l'API pour
rÃ©cupÃ©rer les donnÃ©es (`fetchAPIMock().todos`) et dÃ©souscrire
(`apiUnSubscribe()`).

Dans cette exercice tu vas devoir dÃ©lÃ©guer cette tache Ã  un HOC qui va s'occuper
de toutes ces Ã©tapes et passer les data en props aux composants. C'est partie !

## Aller plus loin

ğŸ“‘ Le lien vers
[la doc HOC](https://fr.reactjs.org/docs/higher-order-components.html)

## ğŸœ Feedback

Remplir le formulaire le
[formulaire de FeedBack.](https://go.mikecodeur.com/cours-react-avis?entry.1430994900=React%20Patterns&entry.533578441=03%20HOC%20:%20Hight%20Order%20Component)
